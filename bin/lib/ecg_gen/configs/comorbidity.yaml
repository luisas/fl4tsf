# comorbidities.yaml
# All prevalence values are probabilities in [0,1].
# Multiple conditions can be sampled per patient; apply effects cumulatively.
# 
# effect_type determines how the condition is applied:
# - parameter: Modify physiological parameters (HR, HRV, QT) via existing system
# - morphology: Require post-processing for complex ECG shape changes
# - timing: Use morphology_params to modify wave timing in ODE solver

diabetes:
  effect_type: parameter
  description: "Type 2 or insulin-treated diabetes; autonomic neuropathy common."
  effects:
    hr_offset: +5            # mild tachycardia
    hrv_multiplier: 0.80     # reduced variability
    qt_offset_ms: +10        # modest QT prolongation
    noise_multiplier: 1.1
  prevalence_by_archetype:
    healthy_young: 0.02
    athlete: 0.01
    elderly_frail: 0.30
    cardiac_outpatient: 0.45
    icu_critical: 0.35

copd:
  effect_type: parameter
  description: "Moderate-severe chronic obstructive pulmonary disease."
  effects:
    hr_offset: +7
    hrv_multiplier: 0.85
    qt_offset_ms: +0
    noise_multiplier: 1.3    # respiratory motion artefacts
  prevalence_by_archetype:
    healthy_young: 0.01
    athlete: 0.00
    elderly_frail: 0.25
    cardiac_outpatient: 0.30
    icu_critical: 0.40

renal_disease:
  effect_type: parameter
  description: "Stage 3+ chronic kidney disease or dialysis."
  effects:
    hr_offset: +4
    hrv_multiplier: 0.90
    qt_offset_ms: +20        # strong association with prolonged QT
    noise_multiplier: 1.2
  prevalence_by_archetype:
    healthy_young: 0.01
    athlete: 0.00
    elderly_frail: 0.20
    cardiac_outpatient: 0.25
    icu_critical: 0.35

sleep_apnea:
  effect_type: parameter
  description: "Obstructive sleep apnoea (untreated)."
  effects:
    hr_offset: +3
    hrv_multiplier: 1.15     # cyclical brady-tachy boosts overall SDNN
    qt_offset_ms: +0
    noise_multiplier: 1.0
  prevalence_by_archetype:
    healthy_young: 0.05
    athlete: 0.04
    elderly_frail: 0.15
    cardiac_outpatient: 0.20
    icu_critical: 0.18

heart_failure:
  effect_type: parameter
  description: "NYHA IIâ€“IV chronic heart failure."
  effects:
    hr_offset: +12
    hrv_multiplier: 0.60
    qt_offset_ms: +25
    noise_multiplier: 1.1
  prevalence_by_archetype:
    healthy_young: 0.00
    athlete: 0.00
    elderly_frail: 0.20
    cardiac_outpatient: 0.55
    icu_critical: 0.70

# New morphology-based conditions requiring post-processing
old_myocardial_infarction:
  effect_type: morphology
  description: "Prior myocardial infarction with pathological Q-waves and poor R-wave progression."
  prevalence_by_archetype:
    healthy_young: 0.001
    athlete: 0.002
    elderly_frail: 0.15
    cardiac_outpatient: 0.35
    icu_critical: 0.40

chronic_atrial_fibrillation:
  effect_type: morphology
  description: "Persistent atrial fibrillation with irregularly irregular rhythm."
  prevalence_by_archetype:
    healthy_young: 0.001
    athlete: 0.01               # Paradoxically higher in endurance athletes
    elderly_frail: 0.10
    cardiac_outpatient: 0.20
    icu_critical: 0.25

# New timing-based condition using morphology_params
long_qt_syndrome:
  effect_type: timing
  description: "Congenital or acquired QT prolongation syndrome."
  morphology_params:
    qt_prolongation_factor: 1.4  # 40% longer QT interval
    freeze_morphology: true      # Preserve pathological timing regardless of HR
  prevalence_by_archetype:
    healthy_young: 0.002
    athlete: 0.001
    elderly_frail: 0.008
    cardiac_outpatient: 0.015
    icu_critical: 0.020